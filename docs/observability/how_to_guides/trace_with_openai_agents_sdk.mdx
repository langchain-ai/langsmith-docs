# Trace with OpenAI Agents SDK

The [OpenAI Agents SDK](https://github.com/openai/openai-agents-python) allows you to build agentic applications powered by OpenAI's models.

## Prerequisites

Before getting started, you'll need:
- An OpenAI API key (get one from [OpenAI Platform](https://platform.openai.com/api-keys))
- A LangSmith API key (get one from [LangSmith Settings](https://smith.langchain.com/settings))

## Installation

info
Requires Python SDK version `langsmith>=0.3.15`.


Install LangSmith with OpenAI Agents support:

```bash
pip install "langsmith[openai-agents]"
```

This will install both the LangSmith library and the OpenAI Agents SDK.

## Configuration

Set up your environment variables with your API keys:

```bash
OPENAI_API_KEY="your-openai-api-key-here"
LANGSMITH_API_KEY="your-langsmith-api-key-here"
LANGSMITH_PROJECT="your-project-name"  # Optional: defaults to "default"
```

## Quick Start

Integrate LangSmith tracing with the OpenAI Agents SDK by using the `OpenAIAgentsTracingProcessor` class.

```python
import asyncio
from agents import Agent, Runner, set_trace_processors
from langsmith.wrappers import OpenAIAgentsTracingProcessor

async def main():
    agent = Agent(
        name="Captain Obvious",
        instructions="You are Captain Obvious, the world's most literal technical support agent.",
    )

    question = "Why is my code failing when I try to divide by zero? I keep getting this error message."
    result = await Runner.run(agent, question)
    print(result.final_output)

if __name__ == "__main__":
    set_trace_processors([OpenAIAgentsTracingProcessor()])
    asyncio.run(main())
```


The agent's execution flow, including all spans and their details, will be logged to LangSmith and you can view the trace in your [LangSmith dashboard](https://smith.langchain.com/).

![OpenAI Agents SDK Trace in LangSmith](./static/agent_trace.png)

## Troubleshooting

**Common Issues:**

- **Authentication Error**: Ensure both `OPENAI_API_KEY` and `LANGSMITH_API_KEY` are properly set
- **Import Error**: Verify you installed the correct package with `pip install "langsmith[openai-agents]"`
- **No traces appearing**: Check that your `LANGSMITH_PROJECT` environment variable is set and matches your project name in LangSmith
